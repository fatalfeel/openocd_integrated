# shipped busblaster kt-link cfg
source /opt/openocd/share/openocd/scripts/interface/ftdi/dp_busblaster_kt-link.cfg

if { [info exists CHIPNAME] } {
   set  _CHIPNAME $CHIPNAME
} else {
   set  _CHIPNAME unknowCHIP
}

# CoreSight Debug Access Port
if { [info exists DAP_TAPID] } {
        set _DAP_TAPID $DAP_TAPID
} else {
        set _DAP_TAPID 0x00000000
}

# the DAP tap
transport select swd
swd newdap $_CHIPNAME cpu -expected-id $_DAP_TAPID -ignore-version
dap create $_CHIPNAME.dap -chain-position $_CHIPNAME.cpu
target create $_CHIPNAME.cpu.0 aarch64 -dap $_CHIPNAME.dap -coreid 0

# Slow speed to be sure it will work
adapter speed 1000

init
dap info 1
